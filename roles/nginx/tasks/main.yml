---

- name:           Add Nginx repository
  apt_repository: repo="ppa:nginx/stable" codename="{{ ansible_distribution_release }}" update_cache=yes

- name: Install Nginx
  apt:  name=nginx state=latest

- name:    Save origin Nginx config
  command: mv -fv /etc/nginx/nginx.conf /etc/nginx/nginx.conf-origin creates=/etc/nginx/nginx.conf-origin

- name:     Copy Nginx config
  template: src=nginx.conf dest=/etc/nginx/nginx.conf
  notify:   Restart Nginx

- name: Clean /etc/nginx/sites-enabled
  file: path="/etc/nginx/sites-enabled/default" state=absent

- name: Clean /var/www
  file: path="/var/www/html" state=absent
